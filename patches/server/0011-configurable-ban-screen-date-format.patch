From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: booky10 <boooky10@gmail.com>
Date: Mon, 5 Jul 2021 19:58:07 +0200
Subject: [PATCH] configurable ban-screen date format


diff --git a/src/main/java/net/minecraft/server/players/PlayerList.java b/src/main/java/net/minecraft/server/players/PlayerList.java
index e0dc1aa46703ed1d761bfcae2b81064785f52bfb..a285930d4f088a0a7f0dde4b97d43c383d1421d8 100644
--- a/src/main/java/net/minecraft/server/players/PlayerList.java
+++ b/src/main/java/net/minecraft/server/players/PlayerList.java
@@ -744,7 +744,7 @@ public abstract class PlayerList {
 
             chatmessage = new TranslatableComponent("multiplayer.disconnect.banned.reason", new Object[]{gameprofilebanentry.getReason()});
             if (gameprofilebanentry.getExpires() != null) {
-                chatmessage.append(new TranslatableComponent("multiplayer.disconnect.banned.expiration", new Object[]{PlayerList.BAN_DATE_FORMAT.format(gameprofilebanentry.getExpires())}));
+                chatmessage.append(new TranslatableComponent("multiplayer.disconnect.banned.expiration", new Object[]{tk.booky.cloudplane.CloudPlaneConfig.expireDateFormat.format(gameprofilebanentry.getExpires())})); // CloudPlane - configurable date format
             }
 
             // return chatmessage;
@@ -757,7 +757,7 @@ public abstract class PlayerList {
 
             chatmessage = new TranslatableComponent("multiplayer.disconnect.banned_ip.reason", new Object[]{ipbanentry.getReason()});
             if (ipbanentry.getExpires() != null) {
-                chatmessage.append(new TranslatableComponent("multiplayer.disconnect.banned_ip.expiration", new Object[]{PlayerList.BAN_DATE_FORMAT.format(ipbanentry.getExpires())}));
+                chatmessage.append(new TranslatableComponent("multiplayer.disconnect.banned_ip.expiration", new Object[]{tk.booky.cloudplane.CloudPlaneConfig.expireDateFormat.format(ipbanentry.getExpires())})); // CloudPlane - configurable date format
             }
 
             // return chatmessage;
diff --git a/src/main/java/tk/booky/cloudplane/CloudPlaneConfig.java b/src/main/java/tk/booky/cloudplane/CloudPlaneConfig.java
index 7c38855cde3d11c63b5f65f4c864a8da5501197b..680634fb56a5086c8ce60861d58806a122539114 100644
--- a/src/main/java/tk/booky/cloudplane/CloudPlaneConfig.java
+++ b/src/main/java/tk/booky/cloudplane/CloudPlaneConfig.java
@@ -135,4 +135,9 @@ public class CloudPlaneConfig {
     private static void sleeping() {
         sleepMessage = getString("settings.sleeping.message", sleepMessage);
     }
+
+    public static java.text.SimpleDateFormat expireDateFormat = (java.text.SimpleDateFormat) net.minecraft.server.players.PlayerList.BAN_DATE_FORMAT.clone();
+    private static void banning() {
+        expireDateFormat = new java.text.SimpleDateFormat(getString("settings.banning.date-format", expireDateFormat.toPattern()));
+    }
 }
diff --git a/src/main/java/tk/booky/cloudplane/commands/TempBanCommand.java b/src/main/java/tk/booky/cloudplane/commands/TempBanCommand.java
index 8e634dd88407dda1202bd3105176bb422c505628..9a2d2b7a2dd5a8a6f52c08a256f1276f0ade9722 100644
--- a/src/main/java/tk/booky/cloudplane/commands/TempBanCommand.java
+++ b/src/main/java/tk/booky/cloudplane/commands/TempBanCommand.java
@@ -67,7 +67,7 @@ public class TempBanCommand implements CloudPlaneCommand {
 
             if (target == null) continue;
             BaseComponent component = new TranslatableComponent("multiplayer.disconnect.banned");
-            component.append(new TranslatableComponent("multiplayer.disconnect.banned.expiration", PlayerList.BAN_DATE_FORMAT.format(expirationDate)));
+            component.append(new TranslatableComponent("multiplayer.disconnect.banned.expiration", tk.booky.cloudplane.CloudPlaneConfig.expireDateFormat.format(expirationDate))); // CloudPlane - configurable date format
             target.connection.disconnect(component, PlayerKickEvent.Cause.BANNED);
         }
 
